<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="800" height="600">
  <title>Sample KiCad Schematic</title>
  <desc>Test fixture schematic with data-ref attributes for component mapping</desc>

  <!-- Background -->
  <rect width="800" height="600" fill="#fafafa"/>

  <!-- Grid (optional visual aid) -->
  <defs>
    <pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse">
      <path d="M 50 0 L 0 0 0 50" fill="none" stroke="#e0e0e0" stroke-width="0.5"/>
    </pattern>
  </defs>
  <rect width="800" height="600" fill="url(#grid)"/>

  <!-- R1 - Resistor -->
  <g data-ref="R1" data-value="10k">
    <rect x="100" y="100" width="60" height="20" fill="none" stroke="#000" stroke-width="2"/>
    <line x1="80" y1="110" x2="100" y2="110" stroke="#000" stroke-width="2"/>
    <line x1="160" y1="110" x2="180" y2="110" stroke="#000" stroke-width="2"/>
    <text x="130" y="95" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">R1</text>
    <text x="130" y="135" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">10k</text>
  </g>

  <!-- R2 - Resistor -->
  <g data-ref="R2" data-value="4.7k">
    <rect x="100" y="180" width="60" height="20" fill="none" stroke="#000" stroke-width="2"/>
    <line x1="80" y1="190" x2="100" y2="190" stroke="#000" stroke-width="2"/>
    <line x1="160" y1="190" x2="180" y2="190" stroke="#000" stroke-width="2"/>
    <text x="130" y="175" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">R2</text>
    <text x="130" y="215" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">4.7k</text>
  </g>

  <!-- C1 - Capacitor -->
  <g data-ref="C1" data-value="100nF">
    <line x1="250" y1="90" x2="250" y2="130" stroke="#000" stroke-width="2"/>
    <line x1="260" y1="90" x2="260" y2="130" stroke="#000" stroke-width="2"/>
    <line x1="250" y1="110" x2="230" y2="110" stroke="#000" stroke-width="2"/>
    <line x1="260" y1="110" x2="280" y2="110" stroke="#000" stroke-width="2"/>
    <text x="255" y="80" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">C1</text>
    <text x="255" y="150" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">100nF</text>
  </g>

  <!-- U1 - IC (ESP32) -->
  <g data-ref="U1" data-value="ESP32-WROOM">
    <rect x="350" y="150" width="120" height="200" fill="#f5f5f5" stroke="#000" stroke-width="2"/>
    <!-- Pins left side -->
    <line x1="330" y1="170" x2="350" y2="170" stroke="#000" stroke-width="2"/>
    <line x1="330" y1="200" x2="350" y2="200" stroke="#000" stroke-width="2"/>
    <line x1="330" y1="230" x2="350" y2="230" stroke="#000" stroke-width="2"/>
    <line x1="330" y1="260" x2="350" y2="260" stroke="#000" stroke-width="2"/>
    <line x1="330" y1="290" x2="350" y2="290" stroke="#000" stroke-width="2"/>
    <line x1="330" y1="320" x2="350" y2="320" stroke="#000" stroke-width="2"/>
    <!-- Pins right side -->
    <line x1="470" y1="170" x2="490" y2="170" stroke="#000" stroke-width="2"/>
    <line x1="470" y1="200" x2="490" y2="200" stroke="#000" stroke-width="2"/>
    <line x1="470" y1="230" x2="490" y2="230" stroke="#000" stroke-width="2"/>
    <line x1="470" y1="260" x2="490" y2="260" stroke="#000" stroke-width="2"/>
    <line x1="470" y1="290" x2="490" y2="290" stroke="#000" stroke-width="2"/>
    <line x1="470" y1="320" x2="490" y2="320" stroke="#000" stroke-width="2"/>
    <!-- Labels -->
    <text x="410" y="140" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#000">U1</text>
    <text x="410" y="370" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">ESP32-WROOM</text>
    <text x="410" y="260" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#333">ESP32</text>
  </g>

  <!-- LED1 - LED -->
  <g data-ref="LED1" data-value="Red">
    <polygon points="550,100 570,120 550,140" fill="none" stroke="#000" stroke-width="2"/>
    <line x1="570" y1="100" x2="570" y2="140" stroke="#000" stroke-width="2"/>
    <line x1="530" y1="120" x2="550" y2="120" stroke="#000" stroke-width="2"/>
    <line x1="570" y1="120" x2="590" y2="120" stroke="#000" stroke-width="2"/>
    <!-- Light rays -->
    <line x1="575" y1="95" x2="585" y2="85" stroke="#c00" stroke-width="1"/>
    <line x1="580" y1="100" x2="590" y2="90" stroke="#c00" stroke-width="1"/>
    <text x="560" y="85" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">LED1</text>
    <text x="560" y="160" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">Red</text>
  </g>

  <!-- Power symbols -->
  <g data-ref="PWR1">
    <line x1="700" y1="80" x2="700" y2="100" stroke="#000" stroke-width="2"/>
    <line x1="690" y1="100" x2="710" y2="100" stroke="#000" stroke-width="2"/>
    <text x="700" y="70" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#c00">+3.3V</text>
  </g>

  <!-- Ground symbol -->
  <g data-ref="GND1">
    <line x1="700" y1="500" x2="700" y2="520" stroke="#000" stroke-width="2"/>
    <line x1="685" y1="520" x2="715" y2="520" stroke="#000" stroke-width="2"/>
    <line x1="690" y1="525" x2="710" y2="525" stroke="#000" stroke-width="2"/>
    <line x1="695" y1="530" x2="705" y2="530" stroke="#000" stroke-width="2"/>
    <text x="700" y="550" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">GND</text>
  </g>

  <!-- Wires connecting components -->
  <g stroke="#000" stroke-width="1.5" fill="none">
    <!-- R1 to C1 -->
    <path d="M 180 110 L 230 110"/>
    <!-- R1 to U1 -->
    <path d="M 180 110 L 200 110 L 200 170 L 330 170"/>
    <!-- R2 to U1 -->
    <path d="M 180 190 L 200 190 L 200 200 L 330 200"/>
    <!-- C1 to power -->
    <path d="M 280 110 L 300 110 L 300 80 L 700 80"/>
    <!-- U1 to LED -->
    <path d="M 490 170 L 510 170 L 510 120 L 530 120"/>
    <!-- LED to power -->
    <path d="M 590 120 L 620 120 L 620 80 L 690 80"/>
  </g>

  <!-- Title block -->
  <rect x="550" y="550" width="240" height="40" fill="#fff" stroke="#000" stroke-width="1"/>
  <text x="670" y="570" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#000">Sample Schematic</text>
  <text x="670" y="585" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#666">KiCad Collab Test Fixture</text>
</svg>
